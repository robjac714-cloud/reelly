<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Creators Media</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />


  <!-- Leaflet (Ù„Ù„Ø®Ø±ÙŠØ·Ø© ØªØ¨Ø¹ Ø¯Ø¨ÙŠ) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <style>
    :root{
      --bg:#f5f5f7;
      --panel:#ffffff;
      --panel-soft:#fafafa;
      --muted:#6b7280;
      --text:#111827;
      --stroke:#e5e7eb;
      --chip:#f3f4f6;
      --accent:#2563eb;
      --accent-2:#0ea5e9;
      --danger:#ef4444;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Tahoma;
      position:relative;
      overflow-x:hidden;
    }

    /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù„ÙˆØºÙˆ (ÙˆÙˆØªØ±Ù…Ø§Ø±Ùƒ) */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background:
        radial-gradient(circle at top, rgba(209,213,219,0.7) 0, rgba(245,245,247,1) 55%),
        url("creatorsmedia-logo.png") center/380px no-repeat;
      opacity:0.06;
      pointer-events:none;
      z-index:-1;
      mix-blend-mode:normal;
    }

    /* ===== Header ===== */
    .header{
      position:sticky; top:0; z-index:40;
      background:linear-gradient(90deg,#ffffff,#f9fafb);
      border-bottom:1px solid rgba(209,213,219,.9);
      backdrop-filter: blur(8px);
    }
    .header-inner{
      max-width:1400px; margin:0 auto; padding:10px 18px;
      display:flex; align-items:center; justify-content:flex-start; gap:10px;
    }
    .brand{
      display:flex; align-items:center; gap:8px;
    }
    .brand-logo{
      width:100px; height:50px;
      border-radius:999px;
      object-fit:contain;
      background:transparent;
      margin:50;
    }
    .brand-pill{
      width:28px; height:28px; border-radius:999px;
      background:radial-gradient(circle at 30% 30%, #0ea5e9, #2563eb);
      display:grid; place-items:center;
      font-weight:800; font-size:13px;
      color:#fff;
    }
    .brand-title{
      font-weight:800; font-size:15px; color:#111827;
    }
    .brand-sub{
      font-size:11px; color:var(--muted);
    }

    /* Ø²Ø± Ø±Ø¬ÙˆØ¹ */
    .back-btn{
      padding:7px 14px;
      border-radius:999px;
      border:1px solid #d1d5db;
      background:#ffffff;
      color:#2563eb;
      font-size:11px;
      cursor:pointer;
      display:flex; align-items:center; gap:6px;
      white-space:nowrap;
      box-shadow:0 1px 2px rgba(15,23,42,0.04);
    }

    /* ===== Views ===== */
    .view{ display:none; }
    .view.active{ display:block; }

    /* ===== Landing ===== */
    .landing{
      max-width:1200px;
      margin:20px auto 24px;
      padding:0 16px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .hero{
      background:linear-gradient(135deg,#e0f2fe,#eff6ff);
      border-radius:22px;
      padding:22px 22px 26px;
      border:1px solid #dbeafe;
      box-shadow:0 16px 35px rgba(15,23,42,0.06);
    }
    .hero-title{
      font-size:22px; font-weight:900; margin-bottom:6px; color:#0f172a;
    }
    .hero-sub{
      font-size:13px; color:var(--muted); max-width:640px;
    }
    .options{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:14px;
    }
    .option-card{
      background:var(--panel);
      border-radius:18px;
      padding:16px 16px 14px;
      border:1px solid var(--stroke);
      box-shadow:0 10px 30px rgba(15,23,42,0.04);
      display:flex; flex-direction:column; gap:8px;
      cursor:pointer;
      transition:.18s;
    }
    .option-card:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 40px rgba(15,23,42,0.08);
      border-color:#bfdbfe;
    }
    .option-top{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
    }
    .option-icon{
      width:42px; height:42px;
      border-radius:14px;
      background:radial-gradient(circle at 30% 30%, #0ea5e9,#2563eb);
      display:grid; place-items:center;
      font-size:20px;
      color:#f9fafb;
    }
    .option-title{ font-weight:800; font-size:15px; color:#111827; }
    .option-desc{ font-size:12px; color:var(--muted); }
    .option-cta{
      font-size:12px; color:#2563eb; font-weight:700;
      display:flex; align-items:center; justify-content:flex-end; gap:4px;
    }

    /* ===== Shared Panels ===== */
    .layout{
      max-width:1300px; margin:20px auto; padding:0 16px;
    }
    .panel{
      border:1px solid var(--stroke);
      background:var(--panel-soft);
      border-radius:18px;
      box-shadow:0 16px 40px rgba(15,23,42,0.05);
    }
    .panel-header{
      padding:10px 14px;
      border-bottom:1px solid var(--stroke);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      background:#ffffff;
      border-radius:18px 18px 0 0;
    }
    .panel-header-left{
      display:flex; flex-direction:column; gap:2px;
    }
    .panel-body{ padding:14px; }

    .muted{ color:var(--muted); font-size:12px; }

    /* ===== Search Layout (Ø¨Ø¯ÙˆÙ† Ø®Ø±ÙŠØ·Ø©) ===== */
    .layout-search{
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    /* ===== Form ===== */
    form{
      display:grid;
      grid-template-columns:repeat(2,minmax(220px,1fr));
      gap:12px 16px;
    }
    @media (max-width:800px){
      form{ grid-template-columns:1fr; }
    }
    label{
      font-size:11px;
      color:var(--muted);
      display:block;
      margin-bottom:4px;
    }
    input,select{
      width:100%;
      padding:9px 11px;
      border-radius:11px;
      border:1px solid #d1d5db;
      background:#ffffff;
      color:var(--text);
      font-size:13px;
      box-shadow:0 1px 2px rgba(15,23,42,0.02) inset;
    }
    input::placeholder{ color:#9ca3af; }
    .full{ grid-column:1 / -1; }
    .actions{
      display:flex; flex-wrap:wrap; gap:8px; margin-top:4px;
    }
    button{
      padding:9px 14px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      font-size:12px;
      font-weight:700;
    }
    .btn-primary{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;
      box-shadow:0 8px 18px rgba(37,99,235,0.25);
    }
    .btn-ghost{
      background:#ffffff;
      color:#2563eb;
      border:1px solid #d1d5db;
      box-shadow:0 1px 2px rgba(15,23,42,0.04);
    }

    /* Chips */
    .chips{
      display:flex; flex-wrap:wrap; gap:6px; margin-bottom:6px;
    }
    .chips button{
      padding:5px 9px;
      border-radius:999px;
      background:var(--chip);
      border:1px solid #e5e7eb;
      color:var(--muted);
      font-size:11px;
      cursor:pointer;
    }
    .chips button.active{
      color:#f9fafb;
      border-color:var(--accent);
      background:linear-gradient(120deg,#2563eb,#0ea5e9);
    }

    /* Results Cards */
    .summary{
      display:flex; justify-content:space-between; gap:8px; flex-wrap:wrap;
      font-size:12px; color:var(--muted);
    }
    .grid{
      display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
      gap:14px;
      margin-top:14px;
    }
    .card{
      background:#ffffff;
      border-radius:14px;
      border:1px solid #e5e7eb;
      overflow:hidden;
      transition:.16s;
      box-shadow:0 10px 25px rgba(15,23,42,0.04);
    }
    .card:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 35px rgba(15,23,42,0.08);
      border-color:#bfdbfe;
    }
    .thumb{
      width:100%;
      aspect-ratio:16/10;
      object-fit:cover;
      background:#e5e7eb;
    }
    .card-body{ padding:10px 12px 12px; }
    .card-title{
      font-weight:800; font-size:14px; margin-bottom:4px; color:#111827;
    }
    .chips-line{
      display:flex; flex-wrap:wrap; gap:4px;
    }
    .chip-pill{
      background:#f3f4f6;
      border-radius:999px;
      padding:3px 7px;
      font-size:11px;
      color:var(--muted);
      border:1px solid #e5e7eb;
    }
    .map-link{
      margin-top:8px;
      text-align:center;
      font-size:12px;
      display:block;
      padding:6px 8px;
      border-radius:999px;
      border:1px solid #d1d5db;
      color:#2563eb;
      text-decoration:none;
      background:#f9fafb;
    }

    .empty{
      padding:18px;
      text-align:center;
      color:var(--muted);
      border-radius:14px;
      border:1px dashed #e5e7eb;
      background:#f9fafb;
      font-size:13px;
    }

    /* ===== Dubai map view ===== */
    .dubai-layout{
      display:grid;
      grid-template-columns:minmax(320px,1.4fr) minmax(260px,0.9fr);
      gap:14px;
    }
    @media (max-width:900px){
      .dubai-layout{
        grid-template-columns:1fr;
      }
    }
    #dubaiMap{
      width:100%;
      height:420px;
      border-radius:0 0 18px 18px;
      overflow:hidden;
      background:#e5e7eb;
    }
    @media (max-width:768px){
      #dubaiMap{ height:320px; }
    }
    .dev-item{
      padding:8px 0;
      border-bottom:1px dashed #e5e7eb;
    }
    .dev-title{
      font-weight:700; font-size:13px; color:#111827;
    }
    .dev-sub{
      font-size:11px; color:var(--muted);
    }
    .dev-link{
      font-size:11px; color:#2563eb; text-decoration:none;
    }
  </style>
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <img src="creatorsmedia-logo.png" alt="" class="brand-logo" />
        <div>
          <div class="brand-title">Creators Media</div>
        </div>
      </div>
      <!-- Ø¨Ø¯ÙˆÙ† ØªØ§Ø¨Ù‘Ø§Øª -->
    </div>
  </header>

  <!-- ===== Landing View ===== -->
  <main id="landingView" class="view active">
    <section class="landing">
      <div class="hero">
        <div class="hero-title">Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±Ø§Øª </div>
        <div class="hero-sub">
          Ø§Ø®ØªØ± Ù…Ø§ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ù‡: Ø¨Ø­Ø« Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ÙŠÙ‘Ù† Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ±ØŒ Ø¹Ø±Ø¶ Ø®Ø±Ø§Ø¦Ø· Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠØŒ Ø£Ùˆ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† ÙˆØ§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ÙˆØ®Ø·Ø· Ø§Ù„Ø¯ÙØ¹.
        </div>
      </div>

      <div class="options">
        <div class="option-card" id="cardSearch">
          <div class="option-top">
            <div class="option-icon">ğŸ”</div>
            <div class="option-title">Ø¨Ø­Ø« Ù…Ø´Ø±ÙˆØ¹</div>
          </div>
          <div class="option-desc">
            Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„Ù…Ø³Ø§Ø­Ø©ØŒ Ø§Ù„Ù…Ø·ÙˆÙ‘Ø±ØŒ ÙˆØ¹Ø¯Ø¯ Ø§Ù„ØºØ±ÙØŒ ÙˆØ§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¹Ù„Ù‰ Ø´ÙƒÙ„ ÙƒØ±ÙˆØª.
          </div>
          <div class="option-cta">
            <span>Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø­Ø«</span><span>â†</span>
          </div>
        </div>

        <div class="option-card" id="cardDubaiMap">
          <div class="option-top">
            <div class="option-icon">ğŸ—ºï¸</div>
            <div class="option-title">Ø®Ø±Ø§Ø¦Ø· Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ</div>
          </div>
          <div class="option-desc">
            Ø§Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙÙŠ Ø¯Ø¨ÙŠ Ø¹Ù„Ù‰ Ø®Ø±ÙŠØ·Ø© ÙˆØ§Ø­Ø¯Ø©ØŒ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ÙØªØ­ Ù…ÙˆÙ‚Ø¹ ÙƒÙ„ Ù…Ø´Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Google Maps.
          </div>
          <div class="option-cta">
            <span>Ø¹Ø±Ø¶ Ø®Ø±ÙŠØ·Ø© Ø¯Ø¨ÙŠ</span><span>â†</span>
          </div>
        </div>

        <div class="option-card" id="cardDevelopers">
          <div class="option-top">
            <div class="option-icon">ğŸ—ï¸</div>
            <div class="option-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</div>
          </div>
          <div class="option-desc">
            Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªÙˆØ³ÙŠØ¹Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ù…Ø´Ø§Ø±ÙŠØ¹ ÙƒÙ„ Ù…Ø·ÙˆÙ‘Ø±.
          </div>
          <div class="option-cta">
            <span>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</span><span>â†</span>
          </div>
        </div>

        <div class="option-card" id="cardAvailableUnits">
          <div class="option-top">
            <div class="option-icon">ğŸ¢</div>
            <div class="option-title">Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†</div>
          </div>
          <div class="option-desc">
          Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ø­Ø§Ù„ÙŠØ§Ù‹ Ø­Ø§Ù„ØªÙ‡Ø§ "Ù…ØªØ§Ø­Ø©" 
          </div>
          <div class="option-cta">
            <span>Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</span><span>â†</span>
          </div>
        </div>

        <div class="option-card" id="cardPaymentPlans">
          <div class="option-top">
            <div class="option-icon">ğŸ’°</div>
            <div class="option-title">Ø®Ø·Ø· Ø§Ù„Ø¯ÙØ¹</div>
          </div>
          <div class="option-desc">
            ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø¯ÙØ¹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… (Post Handover) Ø£Ùˆ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡.
          </div>
          <div class="option-cta">
            <span>Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø®Ø·Ø· Ø§Ù„Ø¯ÙØ¹</span><span>â†</span>
          </div>
        </div>

        <div class="option-card" id="cardAreaProjects">
          <div class="option-top">
            <div class="option-icon">ğŸ“</div>
            <div class="option-title">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ù…Ù†Ø·Ù‚Ø©</div>
          </div>
          <div class="option-desc">
            Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚Ø© Ù…Ø«Ù„ Marina Ø£Ùˆ Downtown ÙˆØ´Ø§Ù‡Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¶Ù…Ù†Ù‡Ø§.
          </div>
          <div class="option-cta">
            <span>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</span><span>â†</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Search View (Ø¨Ø¯ÙˆÙ† Ø®Ø±ÙŠØ·Ø©) ===== -->
  <main id="searchView" class="view">
    <section class="layout layout-search">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ø¨Ø­Ø« Ù…Ø´Ø±ÙˆØ¹</div>
            <div class="muted">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙÙ„Ø§ØªØ± Ù„ØªØµÙÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø«Ù… Ø§Ø³ØªØ¹Ø±Ø¶Ù‡Ø§ Ø¹Ù„Ù‰ Ø´ÙƒÙ„ ÙƒØ±ÙˆØª.</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <form id="searchForm">

            <!-- Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© -->
            <div class="full">
              <label>Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©</label>
              <div class="chips search-chips">
                <button type="button" data-val="Dubai">Dubai</button>
                <button type="button" data-val="Marina">Marina</button>
                <button type="button" data-val="Downtown">Downtown</button>
                <button type="button" data-val="Palm Jumeirah">Palm Jumeirah</button>
              </div>
              <input type="text" name="search_query" placeholder="Dubai / Marina / Downtown">
            </div>

            <!-- Ø§Ù„Ø¨Ù„Ø¯ -->
            <div>
              <label>Ø§Ù„Ø¨Ù„Ø¯</label>
              <div class="chips country-chips">
                <button type="button" data-val="UAE">UAE</button>
                <button type="button" data-val="KSA">KSA</button>
                <button type="button" data-val="Qatar">Qatar</button>
              </div>
              <input type="text" name="country" placeholder="UAE">
            </div>

            <!-- Ø§Ù„Ù…Ù†Ø·Ù‚Ø© -->
            <div>
              <label>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
              <div class="chips region-chips">
                <button type="button" data-val="Dubai">Dubai</button>
                <button type="button" data-val="Abu Dhabi">Abu Dhabi</button>
                <button type="button" data-val="Sharjah">Sharjah</button>
                <button type="button" data-val="Ajman">Ajman</button>
              </div>
              <input type="text" name="region" placeholder="Dubai">
            </div>

            <!-- Ø§Ù„Ø³Ø¹Ø± -->
            <div class="full">
              <label>Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø± (Ø¯Ø±Ù‡Ù…)</label>
              <div class="chips price-chips">
                <button type="button" data-from="" data-to="1000000">Ø£Ù‚Ù„ Ù…Ù† 1M</button>
                <button type="button" data-from="1000000" data-to="2000000">1M - 2M</button>
                <button type="button" data-from="2000000" data-to="">Ø£ÙƒØ«Ø± Ù…Ù† 2M</button>
              </div>
            </div>
            <div>
              <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø¯Ù†Ù‰</label>
              <input type="number" name="unit_price_from" placeholder="200000">
            </div>
            <div>
              <label>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø¹Ù„Ù‰</label>
              <input type="number" name="unit_price_to" placeholder="1500000">
            </div>

            <!-- Ø§Ù„Ù…Ø³Ø§Ø­Ø© -->
            <div class="full">
              <label>Ø§Ù„Ù…Ø³Ø§Ø­Ø© (Ù‚Ø¯Ù…Â² / Ù…Â²)</label>
              <div class="chips area-chips">
                <button type="button" data-from="0" data-to="500">0â€“500</button>
                <button type="button" data-from="500" data-to="1000">500â€“1000</button>
                <button type="button" data-from="1000" data-to="1500">1000â€“1500</button>
              </div>
            </div>
            <div>
              <label>Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Ù†</label>
              <input type="number" name="unit_area_from" placeholder="500">
            </div>
            <div>
              <label>Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¥Ù„Ù‰</label>
              <input type="number" name="unit_area_to" placeholder="1500">
            </div>

            <!-- Ø§Ù„Ù…Ø·ÙˆØ± -->
            <div class="full">
              <label>Ø§Ù„Ù…Ø·ÙˆØ±</label>
              <div class="chips developer-chips">
                <button type="button" data-val="Emaar">Emaar</button>
                <button type="button" data-val="DAMAC">DAMAC</button>
                <button type="button" data-val="Nakheel">Nakheel</button>
                <button type="button" data-val="Meraas">Meraas</button>
              </div>
              <input type="text" name="developer" placeholder="Emaar / DAMAC">
            </div>

            <!-- Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù -->
            <div class="full">
              <label>Ø¹Ø¯Ø¯ Ø§Ù„ØºØ±Ù</label>
              <div class="chips bedroom-chips">
                <button type="button" data-val="studio">Ø§Ø³ØªÙˆØ¯ÙŠÙˆ</button>
                <button type="button" data-val="1">1 ØºØ±ÙØ©</button>
                <button type="button" data-val="2">2 ØºØ±Ù</button>
                <button type="button" data-val="3">3 ØºØ±Ù+</button>
              </div>
              <input type="text" name="unit_bedrooms" placeholder="studio,1,2,3">
            </div>

            <!-- Ø£Ø²Ø±Ø§Ø± Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
            <div class="full actions">
              <button type="submit" class="btn-primary">Ø¨Ø­Ø«</button>
              <button type="button" id="dubaiProjects" class="btn-ghost">Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ</button>
              <button type="button" id="abuDhabiProjects" class="btn-ghost">Ù…Ø´Ø§Ø±ÙŠØ¹ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ</button>
              <button type="button" id="sharjahProjects" class="btn-ghost">Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</button>
              <button type="button" id="uaeProjects" class="btn-ghost">Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</button>
              <button type="reset" class="btn-ghost" id="resetBtn">Ø¥ÙØ±Ø§Øº</button>
            </div>

          </form>

          <div class="summary" style="margin-top:10px;">
            <div id="summaryText">â€”</div>
            <div id="debug"></div>
          </div>

          <div id="cards" class="grid"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Dubai Map View ===== -->
  <main id="dubaiMapView" class="view">
    <section class="layout dubai-layout">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ø®Ø±Ø§Ø¦Ø· Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ</div>
            <div class="muted">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù† ÙˆØ¥Ø¸Ù‡Ø§Ø±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©.</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div style="margin-bottom:10px; display:flex; gap:8px; flex-wrap:wrap;">
            <button class="btn-primary" id="loadDubaiMap">ØªØ­Ù…ÙŠÙ„ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ</button>
            <button class="btn-ghost" id="reloadDubaiMap" style="display:none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„</button>
          </div>
          <div id="dubaiMap"></div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div class="muted">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div id="dubaiList" class="empty">Ù„Ù… ÙŠØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¨Ø¹Ø¯.</div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Developers List View ===== -->
  <main id="developersView" class="view">
    <section class="layout">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†</div>
            <div class="muted"> ÙŠØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©  .</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div id="developersList" class="grid"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Available Units View ===== -->
  <main id="availableUnitsView" class="view">
    <section class="layout">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†</div>
            <div class="muted"> Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªÙŠ Ø­Ø§Ù„ØªÙ‡Ø§ Ù…ØªØ§Ø­Ø© .</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div id="availableUnitsList" class="grid"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Payment Plans View ===== -->
  <main id="paymentPlansView" class="view">
    <section class="layout">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ø®Ø·Ø· Ø§Ù„Ø¯ÙØ¹</div>
            <div class="muted">ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø© Ø¯ÙØ¹ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… (post_handover) Ø£Ùˆ ØºÙŠØ± Ø°Ù„Ùƒ.</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div class="chips plan-chips" style="margin-bottom:10px;">
            <button type="button" data-ph="true">Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… (Post Handover)</button>
            <button type="button" data-ph="false">Ø®Ù„Ø§Ù„ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ / Ø¹Ø§Ø¯ÙŠ</button>
          </div>
          <div id="paymentPlansResults" class="grid"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Area Projects View ===== -->
  <main id="areaProjectsView" class="view">
    <section class="layout">
      <div class="panel">
        <div class="panel-header">
          <div class="panel-header-left">
            <div style="font-weight:800;">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</div>
            <div class="muted">Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ØªØ¹Ù„Ù‚Ø© Ø¨Ù‡Ø§.</div>
          </div>
          <button class="back-btn back-to-home">
            <span>â†</span><span>Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
          </button>
        </div>
        <div class="panel-body">
          <div class="chips area-selector" style="margin-bottom:10px;">
            <button type="button" data-val="Dubai Marina">Dubai Marina</button>
            <button type="button" data-val="Downtown Dubai">Downtown</button>
            <button type="button" data-val="Jumeirah Village Circle">JVC</button>
            <button type="button" data-val="Business Bay">Business Bay</button>
            <button type="button" data-val="Palm Jumeirah">Palm Jumeirah</button>
          </div>
          <div id="areaProjectsResults" class="grid"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API =====
    const API_BASE  = "https://search-listings-production.up.railway.app/v1/properties";
    const API_KEY   = "reelly-80fd5f24-WLrF9bAxkGwYrUXFjrIyzNxRlzrB4kpH";
    const API_KEY_HEADER = "X-API-Key";

    // ===== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª (Views) =====
    const views = {
      landingView: document.getElementById("landingView"),
      searchView: document.getElementById("searchView"),
      dubaiMapView: document.getElementById("dubaiMapView"),
      developersView: document.getElementById("developersView"),
      availableUnitsView: document.getElementById("availableUnitsView"),
      paymentPlansView: document.getElementById("paymentPlansView"),
      areaProjectsView: document.getElementById("areaProjectsView")
    };

    function showView(id){
      Object.entries(views).forEach(([key,el])=>{
        el.classList.toggle("active", key === id);
      });

      if(id === "dubaiMapView" && DUBAI_MAP){
        setTimeout(()=>DUBAI_MAP.invalidateSize(), 200);
      }
      if(id === "developersView"){
        loadDevelopers();
      }
      if(id === "availableUnitsView"){
        loadAvailableUnits();
      }
    }

    // ÙƒØ±ÙˆØª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    document.getElementById("cardSearch").addEventListener("click", ()=>{
      showView("searchView");
    });
    document.getElementById("cardDubaiMap").addEventListener("click", ()=>{
      showView("dubaiMapView");
    });
    document.getElementById("cardDevelopers").addEventListener("click", ()=>{
      showView("developersView");
    });
    document.getElementById("cardAvailableUnits").addEventListener("click", ()=>{
      showView("availableUnitsView");
    });
    document.getElementById("cardPaymentPlans").addEventListener("click", ()=>{
      showView("paymentPlansView");
    });
    document.getElementById("cardAreaProjects").addEventListener("click", ()=>{
      showView("areaProjectsView");
    });

    // Ø²Ø± Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª
    document.querySelectorAll(".back-to-home").forEach(btn=>{
      btn.addEventListener("click", ()=>showView("landingView"));
    });

    // ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¨Ø­Ø« =====
    const form        = document.getElementById("searchForm");
    const cards       = document.getElementById("cards");
    const summaryEl   = document.getElementById("summaryText");
    const debugEl     = document.getElementById("debug");

    const dubaiBtn    = document.getElementById("dubaiProjects");
    const abuDhabiBtn = document.getElementById("abuDhabiProjects");
    const sharjahBtn  = document.getElementById("sharjahProjects");
    const uaeBtn      = document.getElementById("uaeProjects");
    const resetBtn    = document.getElementById("resetBtn");

    let LAST_ITEMS = [];

    // ===== Ø®Ø±ÙŠØ·Ø© Ø¯Ø¨ÙŠ =====
    let DUBAI_MAP=null, DUBAI_MARKERS=null;
    const dubaiListEl = document.getElementById("dubaiList");
    const loadDubaiBtn = document.getElementById("loadDubaiMap");
    const reloadDubaiBtn = document.getElementById("reloadDubaiMap");

    function initDubaiMap(){
      if(DUBAI_MAP) return;
      DUBAI_MAP = L.map('dubaiMap').setView([25.2048,55.2708], 10);
      L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(DUBAI_MAP);
      DUBAI_MARKERS = L.layerGroup().addTo(DUBAI_MAP);
    }

    function updateDubaiMap(items){
      initDubaiMap();
      DUBAI_MARKERS.clearLayers();
      const pts=[];
      items.forEach(it=>{
        const c=getCoords(it);
        if(!c) return;
        pts.push([c.lat,c.lng]);
        DUBAI_MARKERS.addLayer(L.marker([c.lat,c.lng]).bindPopup(it.name||""));
      });
      if(pts.length) DUBAI_MAP.fitBounds(pts,{padding:[20,20]});
    }

    function renderDubaiList(items){
      if(!items.length){
        dubaiListEl.className="empty";
        dubaiListEl.textContent="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.";
        return;
      }
      dubaiListEl.className="";
      dubaiListEl.innerHTML = items.slice(0,150).map(it=>{
        const c=getCoords(it);
        const title=it.name||"Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";
        const dev=it.developer||"";
        return `
          <div class="dev-item">
            <div class="dev-title">${title}</div>
            <div class="dev-sub">${dev}</div>
            ${c ? `<a class="dev-link" href="https://maps.google.com/?q=${c.lat},${c.lng}" target="_blank">ÙØªØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a>` : ""}
          </div>
        `;
      }).join("");
    }

    // ===== Helpers Ø¹Ø§Ù…Ø© =====
    function objectFromForm(f){
      const fd = new FormData(f);
      const o={};
      for(const [k,v] of fd.entries()){
        if(v.trim()!=="") o[k]=v.trim();
      }
      return o;
    }
    function buildParams(obj){
      const p=new URLSearchParams();
      Object.entries(obj).forEach(([k,v])=>p.append(k,v));
      return p.toString();
    }
    function tryParseJSON(s){
      try{ return JSON.parse(s) }catch{return null;}
    }
    function isImg(u){
      return typeof u==="string" && /^https?:\/\//.test(u);
    }
    function getImage(it){
      if(typeof it.cover_image_url==="string"){
        const p=tryParseJSON(it.cover_image_url);
        if(p?.url) return p.url;
        if(isImg(it.cover_image_url)) return it.cover_image_url;
      }
      return "https://dummyimage.com/800x500/e5e7eb/111827&text=No+Image";
    }
    function getCoords(it){
      if(typeof it.coordinates==="string"){
        const parts = it.coordinates.split(",").map(v=>Number(v.trim()));
        if(parts.length>=2 && parts.every(Number.isFinite)) return {lat:parts[0],lng:parts[1]};
      }
      return null;
    }

    function renderCardsInto(containerId, items){
      const container = document.getElementById(containerId);
      container.innerHTML="";
      if(!items.length){
        container.innerHTML="<div class='empty'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.</div>";
        return;
      }
      items.forEach(it=>{
        const img = getImage(it);
        const c   = getCoords(it);
        const title = it.name || "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";
        const dev   = it.developer || "--";
        const beds  = it.unit_bedrooms || "";
        const area  = it.area || it.unit_area || "";
        const price = it.min_price || it.price || "";
        const curr  = it.price_currency || "";

        const card = document.createElement("div");
        card.className="card";
        card.innerHTML = `
          <img src="${img}" class="thumb" alt="project"/>
          <div class="card-body">
            <div class="card-title">${title}</div>
            <div class="chips-line">
              <span class="chip-pill">${dev}</span>
              ${beds ? `<span class="chip-pill">ØºØ±Ù: ${beds}</span>` : ""}
              ${area ? `<span class="chip-pill">Ù…Ø³Ø§Ø­Ø©: ${area}</span>` : ""}
              ${price ? `<span class="chip-pill">${price} ${curr}</span>` : ""}
            </div>
            ${
              c
              ? `<a class="map-link" href="https://maps.google.com/?q=${c.lat},${c.lng}" target="_blank">ÙØªØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</a>`
              : `<div class="map-link" style="opacity:.6; cursor:default; pointer-events:none; background:#f3f4f6;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</div>`
            }
          </div>
        `;
        container.appendChild(card);
      });
    }

    function renderCards(items){
      renderCardsInto("cards", items);
    }

    async function smartFetch(payload){
      const qs = buildParams(payload);

      // 1) GET
      let url = `${API_BASE}?${qs}`;
      let r = await fetch(url,{
        method:"GET",
        headers:{
          [API_KEY_HEADER]:API_KEY,
          "accept":"application/json"
        }
      });
      if(r.ok) return {r,url};

      // 2) POST
      url = API_BASE;
      r = await fetch(url,{
        method:"POST",
        headers:{
          [API_KEY_HEADER]:API_KEY,
          "Content-Type":"application/json"
        },
        body:JSON.stringify(payload)
      });
      if(r.ok) return {r,url};

      // 3) fallback api_key Ø¨Ø§Ù„Ù€ query
      url = `${API_BASE}?${qs}&api_key=${API_KEY}`;
      r = await fetch(url);
      return {r,url};
    }

    async function runSearch(payload){
      summaryEl.textContent="â€”";
      cards.innerHTML="<div class='empty'>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>";
      debugEl.textContent="";

      const {r,url} = await smartFetch(payload);
      const text = await r.text();
      let data={}; try{ data = JSON.parse(text); }catch(e){}

      debugEl.textContent = `Status: ${r.status}`;
      if(!r.ok){
        cards.innerHTML="<div class='empty'>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¬Ù„Ø¨. ØªØ­Ù‚Ù‚ Ù…Ù† API Key Ø£Ùˆ Ø§Ù„Ù‚ÙŠÙ….</div>";
        summaryEl.textContent="ÙØ´Ù„ Ø§Ù„Ø¬Ù„Ø¨";
        return;
      }

      const items = data.items || data.data || data.results || [];
      LAST_ITEMS = items;
      summaryEl.textContent = `Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬: ${items.length}`;
      renderCards(items);
    }

    // ===== Ø´ÙŠØ¨Ø³ (Ù‚ÙŠÙ…Ø© ÙˆØ§Ø­Ø¯Ø©) =====
    function clearAllChipActive(){
      document.querySelectorAll(".chips button").forEach(b=>b.classList.remove("active"));
    }
    function bindChipGroup(selector,input){
      const chips = document.querySelectorAll(selector+" button");
      chips.forEach(btn=>{
        btn.addEventListener("click", ()=>{
          chips.forEach(b=>b.classList.remove("active"));
          btn.classList.add("active");
          input.value = btn.dataset.val || "";
          runSearch(objectFromForm(form));
        });
      });
    }

    bindChipGroup(".search-chips",  form.elements["search_query"]);
    bindChipGroup(".country-chips", form.elements["country"]);
    bindChipGroup(".region-chips",  form.elements["region"]);
    bindChipGroup(".developer-chips", form.elements["developer"]);
    bindChipGroup(".bedroom-chips", form.elements["unit_bedrooms"]);

    // Ø´ÙŠØ¨Ø³ Ø§Ù„Ø³Ø¹Ø±
    const priceChips=document.querySelectorAll(".price-chips button");
    const priceFrom=form.elements["unit_price_from"];
    const priceTo=form.elements["unit_price_to"];
    priceChips.forEach(btn=>{
      btn.addEventListener("click", ()=>{
        priceChips.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        priceFrom.value = btn.dataset.from || "";
        priceTo.value   = btn.dataset.to   || "";
        runSearch(objectFromForm(form));
      });
    });

    // Ø´ÙŠØ¨Ø³ Ø§Ù„Ù…Ø³Ø§Ø­Ø©
    const areaChips=document.querySelectorAll(".area-chips button");
    const areaFrom=form.elements["unit_area_from"];
    const areaTo=form.elements["unit_area_to"];
    areaChips.forEach(btn=>{
      btn.addEventListener("click", ()=>{
        areaChips.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        areaFrom.value = btn.dataset.from || "";
        areaTo.value   = btn.dataset.to   || "";
        runSearch(objectFromForm(form));
      });
    });

    // ===== Ø£Ø²Ø±Ø§Ø± Preset Ù„Ù„Ø¨Ø­Ø« =====
    function presetProjects({country,region,query}){
      form.reset();
      clearAllChipActive();
      if(country) form.elements["country"].value = country;
      if(region)  form.elements["region"].value  = region;
      if(query)   form.elements["search_query"].value = query;
      runSearch(objectFromForm(form));
    }

    dubaiBtn.addEventListener("click", ()=>presetProjects({country:"UAE",region:"Dubai",query:"Dubai"}));
    abuDhabiBtn.addEventListener("click", ()=>presetProjects({country:"UAE",region:"Abu Dhabi",query:"Abu Dhabi"}));
    sharjahBtn.addEventListener("click", ()=>presetProjects({country:"UAE",region:"Sharjah",query:"Sharjah"}));
    uaeBtn.addEventListener("click", ()=>presetProjects({country:"UAE",region:"",query:"UAE"}));

    // ===== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ÙÙˆØ±Ù… =====
    form.addEventListener("submit", e=>{
      e.preventDefault();
      runSearch(objectFromForm(form));
    });

    resetBtn.addEventListener("click", ()=>{
      clearAllChipActive();
      cards.innerHTML="";
      summaryEl.textContent="â€”";
      debugEl.textContent="";
      LAST_ITEMS=[];
    });

    // ===== ØªØ­Ù…ÙŠÙ„ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø© =====
    async function loadDubaiProjects(){
      loadDubaiBtn.disabled=true;
      loadDubaiBtn.textContent="Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
      reloadDubaiBtn.style.display="none";
      dubaiListEl.className="empty";
      dubaiListEl.textContent="Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ...";

      const payload = { search_query:"Dubai", region:"Dubai", country:"UAE", per_page:"50", page:"1" };
      const {r} = await smartFetch(payload);
      const text = await r.text();
      let data={}; try{ data=JSON.parse(text); }catch(e){}

      const items = data.items || data.data || data.results || [];
      renderDubaiList(items);
      updateDubaiMap(items);

      loadDubaiBtn.disabled=false;
      loadDubaiBtn.textContent="ØªØ­Ù…ÙŠÙ„ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø¯Ø¨ÙŠ";
      reloadDubaiBtn.style.display="inline-flex";
    }

    loadDubaiBtn.addEventListener("click", loadDubaiProjects);
    reloadDubaiBtn.addEventListener("click", loadDubaiProjects);

    // ===== Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† =====
    async function loadDevelopers(){
      const list = document.getElementById("developersList");
      list.innerHTML = "<div class='empty'>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ†...</div>";

      const payload = { per_page:"100", page:"1", country:"UAE" };
      const {r} = await smartFetch(payload);
      const text = await r.text();
      let data={}; try{ data=JSON.parse(text); }catch(e){}

      const items = data.items || data.data || data.results || [];
      const devsSet = new Set(items.map(i=>i.developer).filter(Boolean));
      const devs = Array.from(devsSet).sort();

      list.innerHTML="";
      if(!devs.length){
        list.innerHTML="<div class='empty'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø·ÙˆØ±ÙˆÙ† ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØ©.</div>";
        return;
      }
      devs.forEach(dev=>{
        const card = document.createElement("div");
        card.className="card";
        card.innerHTML = `
          <div class="card-body">
            <div class="card-title">${dev}</div>
            <div class="chips-line">
              <span class="chip-pill">Ù…Ø·ÙˆÙ‘Ø± Ø¹Ù‚Ø§Ø±ÙŠ</span>
            </div>
          </div>
        `;
        list.appendChild(card);
      });
    }

    // ===== Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù† =====
    async function loadAvailableUnits(){
      const containerId = "availableUnitsList";
      document.getElementById(containerId).innerHTML="<div class='empty'>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©...</div>";

      const payload = { sale_status:"available", per_page:"50", page:"1" };
      const {r} = await smartFetch(payload);
      const text = await r.text();
      let data={}; try{ data=JSON.parse(text); }catch(e){}

      const items = data.items || data.data || data.results || [];
      renderCardsInto(containerId, items);
    }

    // ===== Ø®Ø·Ø· Ø§Ù„Ø¯ÙØ¹ (post_handover) =====
    const planChips = document.querySelectorAll(".plan-chips button");
    planChips.forEach(btn=>{
      btn.addEventListener("click", async ()=>{
        planChips.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        const ph = btn.dataset.ph;
        const containerId = "paymentPlansResults";
        document.getElementById(containerId).innerHTML="<div class='empty'>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø®Ø·Ø© Ø§Ù„Ø¯ÙØ¹...</div>";

        const payload = { post_handover: ph, per_page:"50", page:"1" };
        const {r} = await smartFetch(payload);
        const text = await r.text();
        let data={}; try{ data=JSON.parse(text); }catch(e){}

        const items = data.items || data.data || data.results || [];
        renderCardsInto(containerId, items);
      });
    });

    // ===== Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© =====
    const areaSelectorBtns = document.querySelectorAll(".area-selector button");
    areaSelectorBtns.forEach(btn=>{
      btn.addEventListener("click", async ()=>{
        areaSelectorBtns.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        const area = btn.dataset.val;
        const containerId = "areaProjectsResults";
        document.getElementById(containerId).innerHTML="<div class='empty'>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©...</div>";

        const payload = { search_query: area, country:"UAE", per_page:"50", page:"1" };
        const {r} = await smartFetch(payload);
        const text = await r.text();
        let data={}; try{ data=JSON.parse(text); }catch(e){}

        const items = data.items || data.data || data.results || [];
        renderCardsInto(containerId, items);
      });
    });

  </script>
</body>
</html>




